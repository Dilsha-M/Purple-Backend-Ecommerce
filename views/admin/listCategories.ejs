
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Category List</title>
    <link rel="stylesheet" href="/css/style.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        body {
            display: flex;
            min-height: 100vh;
            background-color: #f4f6f7;
            color: #333;
        }

        /* Sidebar styling */
        .sidebar {
            width: 250px;
            background-color: #0f5132;
            padding: 20px;
            color: #fff;
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            overflow-y: auto;
        }

        .sidebar h1 {
            color: #ffffff;
            font-size: 1.8em;
            margin-bottom: 20px;
        }

        .sidebar .actions a {
            display: block;
            padding: 10px;
            margin: 10px 0;
            color: #fff;
            text-decoration: none;
            background-color: #1c7430;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        .sidebar .actions a:hover {
            background-color: #154c24;
        }

        /* Dashboard Content */
        .dashboard-content {
            margin-left: 270px;
            padding: 20px;
            flex-grow: 1;
        }

        h2 {
            color: #0f5132;
            font-size: 2em;
            margin-bottom: 20px;
            text-align: center;
        }

        .category-list {
            list-style-type: none;
            padding: 0;
        }

        .category-item {
            background-color: #ffffff;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #0f5132;
            margin-bottom: 20px;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
        }

        .category-item a {
            color: #1c7430;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .category-item a:hover {
            color: #154c24;
        }

        .subcategory-list {
            margin-top: 10px;
            padding-left: 20px;
        }

        .subcategory-item {
            margin-bottom: 10px;
        }

        .subcategory-item a {
            margin-right: 10px;
        }

        .subcategories {
            display: none;
        }

        .toggle-btn {
            cursor: pointer;
            color: #1c7430;
            font-size: 1.1em;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .toggle-btn:hover {
            color: #154c24;
        }

    </style>
</head>

<body>

    <!-- Sidebar -->
    <div class="sidebar">
        <h1>Admin Dashboard</h1>
        <div class="actions">
            <a href="/admin/create">Create New Product</a>
            <a href="/admin/products">View All Products</a>
            <a href="/admin/create-category">Create New Category</a>
            <a href="/admin/categories">View All Categories</a>
            <a href="/admin/create-subcategory">Create New Subcategory</a>
            <a href="/admin/logout">Logout</a>
        </div>
    </div>

    <!-- Dashboard Content -->
    <div class="dashboard-content">
        <h2>Categories</h2>
        <ul class="category-list">
            <% categories.forEach(category => { %>
                <li class="category-item">
                    <strong><%= category.name %></strong><br>

                    <a href="/admin/categories/<%= category._id %>/edit">Edit</a> |
                    <a href="/admin/categories/<%= category._id %>/delete">Delete</a><br>

                    <a href="javascript:void(0);" class="toggle-btn" onclick="toggleSubCategories('<%= category._id %>')">Show Subcategories</a>

                    <ul id="subcategories-<%= category._id %>" class="subcategories">
                        <% category.subCategories.forEach(subCategory => { %>
                            <li class="subcategory-item">
                                <%= subCategory.name %> -
                                <% if (subCategory.parentCategory) { %>
                                    <%= subCategory.parentCategory.name %>
                                <% } else { %>
                                    No Category Assigned
                                <% } %>
                                <a href="/admin/update-subcategory/<%= subCategory._id %>">Edit</a> |
                                <a href="/admin/subcategories/<%= subCategory._id %>/delete">Delete</a>
                            </li>
                        <% }); %>
                    </ul>
                </li>
            <% }); %>
        </ul>
    </div>

    <script>
        function toggleSubCategories(categoryId) {
            const subcategoryList = document.getElementById('subcategories-' + categoryId);
            if (subcategoryList.style.display === 'none' || subcategoryList.style.display === '') {
                subcategoryList.style.display = 'block';
            } else {
                subcategoryList.style.display = 'none';
            }
        }
    </script>

</body>

</html>
